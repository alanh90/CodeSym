<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CodeSym Control Panel</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
</head>
<body>
    <h1>CodeSym Control Panel</h1>
    <button id="runButton">Run CodeSym</button>
    <div id="output"></div>

    <script>
        document.getElementById("runButton").addEventListener("click", async function() {
            const outputDiv = document.getElementById("output");
            outputDiv.textContent = "Running CodeSym...";

            // Send POST request to start CodeSym
            const response = await fetch("/run_codesym", { method: "POST" });
            const data = await response.json();

            if (data.status === "success") {
                // Begin polling for output
                setInterval(async () => {
                    const outputResponse = await fetch("/get_output");
                    const outputData = await outputResponse.json();
                    if (outputData.status === "success") {
                        outputDiv.textContent = outputData.output;
                    } else {
                        outputDiv.textContent = "Error: " + outputData.message;
                    }
                }, 1000);
            } else {
                outputDiv.textContent = "Failed to run CodeSym: " + data.message;
            }
        });
    </script>
</body>
</html>
